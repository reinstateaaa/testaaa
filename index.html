<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>REINSTATE AAA @ USC!</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background: url('black.jpg') center/cover no-repeat;
            background-color: black;
            color: white;
        }

        h1,
        p {
            text-align: center;
        }

        button {
            background-color: #3498db;
            color: white;
            padding: 10px 20px;
            font-size: 16px;
            border: none;
            cursor: pointer;
            margin-top: 20px;
        }

        #counter {
            font-size: 24px;
            margin-top: 10px;
        }

        .rotating-banner {
            font-size: 36px;
            font-weight: bold;
            white-space: nowrap;
            overflow: hidden;
            width: 100%;
        }

        .rotating-banner span {
            display: inline-block;
            padding-left: 100%;
            animation: marquee 15s linear infinite;
        }

        .action-section {
            font-size: 20px;
            margin-top: 10px;
        }

        @keyframes marquee {
            0% {
                transform: translate(0, 0);
            }

            100% {
                transform: translate(-100%, 0);
            }
        }

        /* Media queries for responsiveness */
        @media only screen and (max-width: 600px) {
            .rotating-banner {
                font-size: 24px;
            }

            .action-section {
                font-size: 16px;
            }
        }
    </style>

    <!-- Firebase initialization script -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-analytics.js";
        import { getDatabase } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-database.js";
        
        const firebaseConfig = {
            apiKey: "AIzaSyAMh3rbnYEZkMpg-6iOVSdp6yQPH50dspg",
            authDomain: "aaacounter.firebaseapp.com",
            projectId: "aaacounter",
            storageBucket: "aaacounter.appspot.com",
            messagingSenderId: "902544041405",
            appId: "1:902544041405:web:e1a8e3a60fcb531abc9ed4",
            measurementId: "G-G8K2J6WF7P",
            databaseURL: "https://aaacounter-default-rtdb.firebaseio.com/"
        };

        // Initialize Firebase
        var app = initializeApp(firebaseConfig);
        var analytics = getAnalytics(app);
        database = getDatabase(app);

        function openMail() {
            var email = 'jcsimon@usc.edu';
            var subject = 'test';
            var body = 'yoyoyo';
            var mailtoURL = 'mailto:' + email +
                '?subject=' + encodeURIComponent(subject) +
                '&body=' + encodeURIComponent(body);
            window.location.href = mailtoURL;

            // Increment the counter in the database
            const counterRef = database.ref('aaacounter/counter');
            counterRef.transaction((currentCount) => (currentCount || 0) + 1);
        }

        // Listen for changes in the counter value and update the display
        const counterRef = database.ref('aaacounter/counter');
        counterRef.on('value', (snapshot) => {
            const clickCountElement = document.getElementById('clickCount');
            if (clickCountElement) {
                clickCountElement.textContent = snapshot.val() || "IDK";
            }
        });

        function initializeFirebase() {
            // Increment the counter in the database
            const counterRef = database.ref('aaacounter/counter');
            counterRef.transaction((currentCount) => (currentCount || 0) + 1);

            // Listen for changes in the counter value and update the display
            counterRef.on('value', (snapshot) => {
                const clickCountElement = document.getElementById('clickCount');
                if (clickCountElement) {
                    const count = snapshot.val();
                    clickCountElement.textContent = count !== null ? count : "IDK";
                }
            });
        }

        document.addEventListener('DOMContentLoaded', function () {
            const mailButton = document.getElementById('mailButton');
            if (mailButton) {
                mailButton.addEventListener('click', openMail);
            }

            const petitionButton = document.getElementById('petitionButton');
            if (petitionButton) {
                petitionButton.addEventListener('click', openChangeOrg);
            }

            initializeFirebase();
        });
    </script>
</head>

<body>
    <div class="rotating-banner">
        <span>REINSTATE AAA @ USC! </span>
    </div>

    <h1>How YOU can help:</h1>
    <p class="action-section">I know this site looks sketch, I made it in a few hours. Below are quick actions you can take to add pressure:</p>
    <p class="action-section">Step 1: Join the <span id="clickCount">IDK</span> others who have demanded change by auto-emailing the board (2 clicks)</p>

    <!-- Add a button with onclick function for the first action -->
     <button id="mailButton">Demand Responsibility</button>

    <!-- Display the counter -->
    <p id="counter">Total Clicks: <span id="clickCount">IDK</span></p>

    <p class="action-section">Step 2: Sign the change.org petition if you haven't already: (5 clicks)</p>
    <!-- Add a button with onclick function for the second action -->
    <button onclick="openChangeOrg()">Sign the Petition</button>

    <!-- Add a script section to define the onclick function for the second action -->
    <script>
        function openChangeOrg() {
            window.open('https://www.change.org/p/demand-for-usc-to-reinstate-academic-achievement-award-aaa-funding-for-current-students?source_location=petitions_browse', '_blank');
        }
    </script>

    <!-- Add a banner at the bottom of the page -->
    <div>
        <h2>ABOUT US:</h2>
        <p>Your removal of the Academic Achievement Award undermines the integrity of the University of Southern California. USC positions itself as an institution where possibilities are unlimited, a place where students can pursue aspirations no matter their financial limitations. Students attend USC with the expectation that these versatile academic opportunities will be available to them by the ability to pursue a variety of majors and minors simultaneously. By removing AAA, you are disenfranchising your most ambitious and deserving students. You are taking advantage of low-income students by restricting their education for unnecessary, exorbitant profit.</p>
    </div>
</body>

</html>
